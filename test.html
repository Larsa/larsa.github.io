<!DOCTYPE html>

<html lang="en-US">

	<head>
		
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="author" content="__MyCompanyName__">
		
		<title>untitled</title>
		
		<base href="./">
		
		<script type="text/javascript">
		
			function checkScheme() {
				console.log("checkScheme");
			    var script = document.createElement('script'); 

			    script.onload = function() { 
			        window.schemeSupported = true;
			    } 
			    script.onerror = function() { 
			        window.schemeSupported = false;
			    } 

			    script.setAttribute('src', "swish://paymentrequest?token=5B2661E950044BDCB81ECDF0D2CE1C44&callbackurl=https%3A%2F%2Fwww.amnesty.se"); 

			    document.getElementsByTagName('head')[0].appendChild(script);
			}		
		
		
			function test() {
				console.log('test')
				try {
					//window.location.href = "swish://paymentrequest?token=5B2661E950044BDCB81ECDF0D2CE1C44&callbackurl=https%3A%2F%2Fwww.amnesty.se";
					var f = window.document.createElement('iframe')
					f.src = "swish://paymentrequest?token=5B2661E950044BDCB81ECDF0D2CE1C44&callbackurl=https%3A%2F%2Fwww.amnesty.se"
					window.document.childNodes[1].append(f)
				} catch(e) {
					console.log('error: ' + e)
				}
			}
			
			function debug() {
				var msg = "window.schemeSupported: " + window.schemeSupported + ' ' + typeof(window.schemeSupported);
				console.log(msg)
				document.getElementById('debug').innerHTML = msg;
			}
			
		</script>
		
	</head>
	
	<body>
		<p>
			v 5
		</p>
		<p>
			<a href="javascript:test()">Test</a>
		</p>
		<p>
			<a href="javascript:debug()">Debug</a>
		</p>
		
		<p id="debug" name="debug">
			
		</p>
		
		
		<script type="text/javascript">
			checkScheme();
		</script>
		
	</body>

</html>